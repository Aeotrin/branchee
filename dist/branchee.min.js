!function(t,e,n){function s(t,s){this.options=s,this.$el=n(t),this.$menu=this.$el.find("."+this.options.classMenu),this.$panes=null,this.$el.on("click","."+this.options.classMenuPaneTarget,n.proxy(this._handleClick,this)),this.options.handleToggle&&n(e).on("click","."+this.options.classToggleMenu,n.proxy(this._handleToggle,this))}s.prototype.init=function(){this.options.onBeforeInit.call(this),this._addRootId(),this._addSectionLabels(),this._addPaneTargets(),this._addMenuToggleTarget(),this._addBackLinks(),this._createPanes(),this._removeOriginalMenu(),this._setActivePane(this.$panes.first()),this.options.onAfterInit.call(this)},s.prototype.toggleOpen=function(){var t=this.$el.attr("id"),e=n('.branchee-toggle-menu[href="#'+t+'"]');e.toggleClass(this.options.classOpen),this.$el.toggleClass(this.options.classOpen),this._clearTransitions(),this.options.onAfterToggle.call(this,e)},s.prototype.getActivePane=function(){return this.$panes.filter("."+this.options.classMenuPaneActive)},s.prototype.getActivePaneByPath=function(t){var e=this.$menu.find('a[href="'+t+'"]');e.addClass(this.options.classMenuItemActive);var n=e.closest("li"),s=n.filter("."+this.options.classBackLink);return s.length?s.closest("."+this.options.classMenuPane):n.first().length?n.first().closest("."+this.options.classMenuPane):void 0},s.prototype.setActivePane=function(t){this._setActivePane(t)},s.prototype._addRootId=function(){this.$menu.find("> ul").attr(this.options.dataPaneId,this._generateId())},s.prototype._addSectionLabels=function(){this.$menu.children("ul").children("li").each(n.proxy(this._addSectionLabel,this))},s.prototype._addSectionLabel=function(t,e){n(e).addClass(this.options.classSection+" "+this.options.classSectionPrefix+(t+1)),n(e).find("ul").addClass(this.options.classSection+" "+this.options.classSectionPrefix+(t+1))},s.prototype._addMenuToggleTarget=function(){var t=this.$el.attr("id"),e=n('.branchee-toggle-menu[href="#'+t+'"]');e.prepend('<span class="branchee-toggle-menu-icon"></span>')},s.prototype._addPaneTargets=function(){var t=this.$menu.find("ul").parents("li").children("a");t.each(n.proxy(this._appendPaneTargets,this))},s.prototype._appendPaneTargets=function(t,e){var s=this._generateId();n(e).siblings("ul").attr(this.options.dataPaneId,s),n(e).append('<span class="'+this.options.classMenuPaneTarget+'" '+this.options.dataPaneTarget+'="'+s+'"></span>')},s.prototype._addBackLinks=function(){var t=this.$menu.find("["+this.options.dataPaneId+"]");t.each(n.proxy(this._addBackLink,this))},s.prototype._addBackLink=function(t,e){var s=n(e).siblings("a").clone(),i=n(e).parents("ul").attr(this.options.dataPaneId);s.children("span").attr(this.options.dataPaneTarget,i),s.prependTo(n(e)).wrap("<li class='"+this.options.classBackLink+"'></li>")},s.prototype._createPanes=function(){var t=this.$menu.find("["+this.options.dataPaneId+"]");t.each(n.proxy(this._createPane,this)),this.$panes=this.$menu.find("."+this.options.classMenuPane)},s.prototype._createPane=function(t,e){var s=n(e).clone();s.find("ul").remove();var i=n('<div class="'+this.options.classMenuPane+'"></div>');i.attr(this.options.dataPaneId,s.attr(this.options.dataPaneId)),s.removeAttr(this.options.dataPaneId).appendTo(this.$menu).wrap(i)},s.prototype._removeOriginalMenu=function(){this.$menu.find("> ul").remove()},s.prototype._generateId=function(){return Math.random().toString(36).slice(2)},s.prototype._handleClick=function(t){t.preventDefault();var e=n(t.target),s=e.closest("."+this.options.classMenuPane),i=this.$el.find("["+this.options.dataPaneId+'="'+e.data(this.options.classMenuPaneTarget)+'"]');this._clearTransitions(),0!==e.closest("."+this.options.classBackLink).length?(s.addClass(this.options.classTransitionExitRight),i.addClass(this.options.classTransitionEnterLeft)):(s.addClass(this.options.classTransitionExitLeft),i.addClass(this.options.classTransitionEnterRight)),this._setActivePane(i)},s.prototype._handleToggle=function(t){t.preventDefault(),this.$el.attr("id")===n(t.currentTarget).attr("href").substring(1)&&this.toggleOpen()},s.prototype._clearTransitions=function(){var t=[this.options.classTransitionExitRight,this.options.classTransitionExitLeft,this.options.classTransitionEnterRight,this.options.classTransitionEnterLeft].join(" ");this.$panes.removeClass(t)},s.prototype._setActivePane=function(t){this.$panes.removeClass(this.options.classMenuPaneActive),t.addClass(this.options.classMenuPaneActive)},this.Branchee=s,n.fn.branchee=function(t){return this.each(function(){var e=n.extend({},n.fn.branchee.defaults,t),i=new s(this,e);i.init(),n(this).data("branchee",i)})},n.fn.branchee.defaults={handleToggle:!0,classBackLink:"branchee-back",classMenuItemActive:"branchee-menu-item-active",classMenuPaneActive:"branchee-menu-pane-active",classMenuPane:"branchee-menu-pane",classMenu:"branchee-menu",classOpen:"branchee-open",classMenuPaneTarget:"branchee-pane-target",classSection:"branchee-section",classSectionPrefix:"branchee-section--",classToggle:"branchee-toggle",classToggleExt:"branchee-toggle-ext",classToggleMenu:"branchee-toggle-menu",classTransitionEnterLeft:"branchee-transition-enterleft",classTransitionEnterRight:"branchee-transition-enterright",classTransitionExitLeft:"branchee-transition-exitleft",classTransitionExitRight:"branchee-transition-exitright",dataPaneId:"data-branchee-pane-id",dataPaneTarget:"data-branchee-pane-target",onBeforeInit:function(){},onAfterInit:function(){},onAfterToggle:function(){}}}(this,this.document,this.jQuery);