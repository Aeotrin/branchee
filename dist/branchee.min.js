!function(n,a,e){function t(n,t){var s=n.find("."+t.classMenu),i=null,c=function(){var n=[t.classTransitionExitRight,t.classTransitionExitLeft,t.classTransitionEnterRight,t.classTransitionEnterLeft].join(" ");i.removeClass(n)},r=function(n){i.removeClass(t.classMenuPaneActive),n.addClass(t.classMenuPaneActive)},l=function(){var a=n.attr("id"),s=e('.branchee-toggle-menu[href="#'+a+'"]');s.toggleClass(t.classOpen),n.toggleClass(t.classOpen),c(),t.onAfterToggle.call(this,s)},o=function(a){a.preventDefault(),n.attr("id")===e(a.currentTarget).attr("href").substring(1)&&l()},d=function(a){a.preventDefault();var s=e(a.target),i=s.closest("."+t.classMenuPane),l=n.find("["+t.dataPaneId+'="'+s.data(t.classMenuPaneTarget)+'"]');c(),0!==s.closest("."+t.classBackLink).length?(i.addClass(t.classTransitionExitRight),l.addClass(t.classTransitionEnterLeft)):(i.addClass(t.classTransitionExitLeft),l.addClass(t.classTransitionEnterRight)),r(l)},u=function(){return Math.random().toString(36).slice(2)},f=function(){s.find("> ul").attr(t.dataPaneId,u())},g=function(n,a){e(a).addClass(t.classSection+" "+t.classSectionPrefix+(n+1)),e(a).find("ul").addClass(t.classSection+" "+t.classSectionPrefix+(n+1))},h=function(){s.children("ul").children("li").each(g)},T=function(n,a){var s=u();e(a).siblings("ul").attr(t.dataPaneId,s),e(a).append('<span class="'+t.classMenuPaneTarget+'" '+t.dataPaneTarget+'="'+s+'"></span>')},b=function(){var n=s.find("ul").parents("li").children("a");n.each(T)},p=function(){var a=n.attr("id"),t=e('.branchee-toggle-menu[href="#'+a+'"]');t.prepend('<span class="branchee-toggle-menu-icon"></span>')},v=function(n,a){var s=e(a).siblings("a").clone(),i=e(a).parents("ul").attr(t.dataPaneId);s.children("span").attr(t.dataPaneTarget,i),s.prependTo(e(a)).wrap("<li class='"+t.classBackLink+"'></li>")},P=function(){var n=s.find("["+t.dataPaneId+"]");n.each(v)},m=function(n,a){var i=e(a).clone();i.find("ul").remove();var c=e('<div class="'+t.classMenuPane+'"></div>');c.attr(t.dataPaneId,i.attr(t.dataPaneId)),i.removeAttr(t.dataPaneId).appendTo(s).wrap(c)},M=function(){var n=s.find("["+t.dataPaneId+"]");n.each(m),i=s.find("."+t.classMenuPane)},I=function(){s.find("> ul").remove()},x=function(){t.onBeforeInit.call(this),f(),h(),b(),p(),P(),M(),I(),r(i.first()),t.onAfterInit.call(this)};return n.on("click","."+t.classMenuPaneTarget,d),t.handleToggle&&e(a).on("click","."+t.classToggleMenu,o),{init:x,toggleOpen:l,clearTransitions:c}}e.fn.branchee=function(n){return n=e.extend({},e.fn.branchee.defaults,n),this.each(function(){var a=e(this),s=t(a,n).init();a.data("branchee",s)})},e.fn.branchee.defaults={handleToggle:!0,classBackLink:"branchee-back",classMenuItemActive:"branchee-menu-item-active",classMenuPaneActive:"branchee-menu-pane-active",classMenuPane:"branchee-menu-pane",classMenu:"branchee-menu",classOpen:"branchee-open",classMenuPaneTarget:"branchee-pane-target",classSection:"branchee-section",classSectionPrefix:"branchee-section--",classToggle:"branchee-toggle",classToggleExt:"branchee-toggle-ext",classToggleMenu:"branchee-toggle-menu",classTransitionEnterLeft:"branchee-transition-enterleft",classTransitionEnterRight:"branchee-transition-enterright",classTransitionExitLeft:"branchee-transition-exitleft",classTransitionExitRight:"branchee-transition-exitright",dataPaneId:"data-branchee-pane-id",dataPaneTarget:"data-branchee-pane-target",onBeforeInit:function(){},onAfterInit:function(){},onAfterToggle:function(){}}}(this,this.document,this.jQuery);